{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"OpenTrans","text":"<p>OpenTrans is a privacy-first, local-LLM batch translation utility using Ollama. It is designed to mirror a source directory into a target language while preserving the exact file hierarchy.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Local-First (Ollama): Private, cost-free translation using models like Gemma, Llama 3, or DeepSeek.</li> <li>Syntax Shielding: Automatically protects code blocks (<code>``), inline code (</code>), LaTeX math ($), and Markdown links from being corrupted by the LLM.</li> <li>Directory Mirroring: Recursively replicates your source folder structure in the output destination.</li> <li>Parallel Processing: Uses <code>ThreadPoolExecutor</code> for high-speed batch handling of large file sets.</li> <li>Smart Caching: Uses hashing to track file changes. Only files that have been modified since the last run are sent to the LLM, saving significant time and compute resources.</li> <li>Resilient File Handling: Automatically pulls required models from Ollama with a real-time progress bar if they are missing.</li> </ul>"},{"location":"#quick-usage","title":"Quick Usage","text":"<p>Simply provide the input directory and the target output directory.</p> <pre><code>opentrans ./docs ./translated_docs --config ./config.yaml\n</code></pre> <p>Example Output:</p> <pre><code>Target Language: Chinese\nInput:  /home/user/Projects/OpenTrans/docs\nOutput: /home/user/Projects/OpenTrans/translated_docs\nUsing Model: translategemma:4b\n\nTranslating Files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 12/12 [00:45&lt;00:00, 3.7s/file]\n\nComplete.\n</code></pre>"},{"location":"#running-examples","title":"Running Examples","text":"<pre><code># Translating Docusaurus\nopentrans ./Example/Docusaurus/docs ./Example/Docusaurus/i18n/zh-hans/docusaurus-plugin-content-blog/current ./config.yaml    \n</code></pre>"},{"location":"#installation","title":"Installation","text":""},{"location":"#setup","title":"Setup","text":"<p>OpenTrans requires Ollama to be installed and running on your local machine.</p> <ol> <li> <p>Install Ollama: Follow instructions at Ollama</p> </li> <li> <p>Install uv</p> </li> </ol> <pre><code>curl -LsSf https://astral.sh/uv/install.sh | sh\nuv tool install .\n</code></pre> <ol> <li>Install OpenTrans</li> </ol> <pre><code>git clone https://github.com/rainstorm108/OpenTrans.git\ncd OpenTrans\nuv pip install .\n</code></pre> <ol> <li>run</li> </ol> <pre><code>opentrans ./docs ./translated_docs --config ./config.yaml\n</code></pre>"},{"location":"#for-developers","title":"For Developers","text":"<ol> <li>Environment Setup</li> </ol> <pre><code>uv sync\nsource .venv/bin/activte\nhatch shell\nuv pip install -e .\n</code></pre> <ol> <li>Running Tests</li> </ol> <pre><code>hatch test\n</code></pre>"},{"location":"#folder-structure","title":"Folder Structure","text":"<pre><code>OpenTrans/\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 opentrans/\n\u2502       \u251c\u2500\u2500 __init__.py        \n\u2502       \u251c\u2500\u2500 main.py            # CLI interface using Click\n\u2502       \u251c\u2500\u2500 settings.py        # Translate settings\n\u2502       \u251c\u2500\u2500 translator.py      # Translate logic\n\u2502       \u251c\u2500\u2500 cache_manager.py   # Manages translation caching using content hashing to skip unchanged files.\n\u2502       \u2514\u2500\u2500 hasher.py          # Hash file for cache\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 test_cache_manager.py\n\u2502   \u251c\u2500\u2500 test_hasher.py\n\u2502   \u2514\u2500\u2500 test_translator.py\n\u251c\u2500\u2500 config.yaml                # Global settings (model, language, etc.)\n\u251c\u2500\u2500 pyproject.toml\n\u2514\u2500\u2500 README.md \n</code></pre>"},{"location":"#workflow","title":"Workflow","text":"<pre><code>graph TD\n    %% Setup Phase\n    Start((Start)) --&gt; CheckRunning{Ollama Running?}\n    CheckRunning -- No --&gt; Err[Error: Start Ollama]\n    CheckRunning -- Yes --&gt; CheckModel{Model Exists?}\n\n    CheckModel -- No --&gt; Pull[Download Model with Progress Bar]\n    Pull --&gt; Init\n    CheckModel -- Yes --&gt; Init[Load Paths &amp; Config]\n\n    %% The Loop\n    Init --&gt; NextFile{Next File?}\n    NextFile -- No --&gt; Exit([Exit])\n    NextFile -- Yes --&gt; IsTranslatable{File Type Supported?}\n\n    %% Branching Logic\n    IsTranslatable -- No --&gt; Mirror[Copy Original File]\n    IsTranslatable -- Yes --&gt; Shield[Apply Syntax Placeholders]\n\n    Shield --&gt; Trans[Translate via Ollama API]\n    Trans --&gt; Restore[Restore Protected Code/Math]\n    Restore --&gt; Save[Create Dir &amp; Save File]\n    Save --&gt; NextFile\n</code></pre>"},{"location":"#todo","title":"Todo","text":"<ul> <li>[x] Click-based CLI interface</li> <li>[x] Placeholder-based syntax protection (Code/LaTeX)</li> <li>[x] Multi-threaded parallel processing</li> <li>[x] Implement hash caching to skip unchanged files</li> <li>[ ] Finish the Docusaurus translate script</li> <li>[ ] User Tree-sitter to replace the code blocks before translation instead of regex</li> <li>[ ] Add support for more file types</li> <li>[ ] ...</li> </ul>"},{"location":"#license","title":"License","text":"<p>This project is licensed under the MIT License.</p>"}]}