{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"OpenTrans  <p>Documentation: https://rainstorm108.github.io/OpenTrans/</p> <p>PyPI: https://pypi.org/project/opentrans/</p> <p>Source Code: https://github.com/RainStorm108/OpenTrans</p> <p>OpenTrans is a privacy-first, local-LLM batch translation utility powered by Ollama. It mirrors a source directory into a target language while preserving the exact file hierarchy, making it ideal for documenting software, translating blogs, or localizing static sites.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Local-First (Ollama): Private, cost-free translation using models like Gemma, Llama 3, or DeepSeek.</li> <li>Syntax Shielding: Automatically protects code blocks (<code>``), inline code (</code>), LaTeX math ($), and Markdown links from being corrupted by the LLM.</li> <li>Directory Mirroring: Recursively replicates your source folder structure in the output destination.</li> <li>Parallel Processing: Uses <code>ThreadPoolExecutor</code> for high-speed batch handling of large file sets.</li> <li>Smart Caching: Uses hashing to track file changes. Only files that have been modified since the last run are sent to the LLM, saving significant time and compute resources.</li> <li>Resilient File Handling: Automatically pulls required models from Ollama with a real-time progress bar if they are missing.</li> </ul>"},{"location":"#installation","title":"Installation","text":"<p>Prerequisites: You must have Ollama installed and running.</p> <p>Option 1: Install via PyPI (Recommended)</p> <pre><code>pip install opentrans\n</code></pre> <p>Option 2: Install via uv</p> <pre><code>uv tool install opentrans\n</code></pre> <p>Option 3: From Source</p> <pre><code>git clone https://github.com/rainstorm108/OpenTrans.git\ncd OpenTrans\nuv tool install .\n</code></pre>"},{"location":"#usage","title":"Usage","text":""},{"location":"#basic-command","title":"Basic Command","text":"<p>The simplest way to run OpenTrans is by specifying the input and output directories:</p> <pre><code>opentrans ./docs ./translated_docs --config ./config.yaml\n</code></pre> <p>Example Output:</p> <pre><code>Target Language: Chinese\nInput:  /home/user/Projects/OpenTrans/docs\nOutput: /home/user/Projects/OpenTrans/translated_docs\nUsing Model: translategemma:4b\n\nTranslating Files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 12/12 [00:45&lt;00:00, 3.7s/file]\n\nComplete.\n</code></pre>"},{"location":"#configuration-configyaml","title":"Configuration (config.yaml)","text":"<p>OpenTrans relies on a YAML configuration file to define the model and target language. See example.</p>"},{"location":"#running-examples","title":"Running Examples","text":"<pre><code>opentrans ./Example/Docusaurus/docs ./Example/Docusaurus/i18n/zh-hans/docusaurus-plugin-content-blog/current ./config.yaml    \n</code></pre>"},{"location":"#local-development","title":"Local Development","text":"<ol> <li> <p>Clone the repository <pre><code>git clone [https://github.com/rainstorm108/OpenTrans.git](https://github.com/rainstorm108/OpenTrans.git)\ncd OpenTrans\n</code></pre></p> </li> <li> <p>Set up the environment (using uv)</p> </li> </ol> <pre><code>uv sync\nsource .venv/bin/activate\n</code></pre> <ol> <li>Install in editable mode</li> </ol> <pre><code>uv pip install -e .\n</code></pre> <ol> <li>Run tests <pre><code>hatch test\n</code></pre></li> </ol>"},{"location":"#project-structure","title":"Project Structure","text":"<pre><code>OpenTrans/\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 opentrans/\n\u2502       \u251c\u2500\u2500 __init__.py        \n\u2502       \u251c\u2500\u2500 main.py            # CLI interface using Click\n\u2502       \u251c\u2500\u2500 settings.py        # Configuration management\n\u2502       \u251c\u2500\u2500 translator.py      # Core translation logic\n\u2502       \u251c\u2500\u2500 cache_manager.py   # Caching system\n\u2502       \u2514\u2500\u2500 hasher.py          # File content hashing\n\u251c\u2500\u2500 tests/\n\u251c\u2500\u2500 config.yaml                \n\u251c\u2500\u2500 pyproject.toml\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"#workflow","title":"Workflow","text":"<pre><code>graph TD\n    %% Setup Phase\n    Start((Start)) --&gt; CheckRunning{Ollama Running?}\n    CheckRunning -- No --&gt; Err[Error: Start Ollama]\n    CheckRunning -- Yes --&gt; CheckModel{Model Exists?}\n\n    CheckModel -- No --&gt; Pull[Download Model with Progress Bar]\n    Pull --&gt; Init\n    CheckModel -- Yes --&gt; Init[Load Paths &amp; Config]\n\n    %% The Loop\n    Init --&gt; NextFile{Next File?}\n    NextFile -- No --&gt; Exit([Exit])\n    NextFile -- Yes --&gt; IsTranslatable{File Type Supported?}\n\n    %% Branching Logic\n    IsTranslatable -- No --&gt; Mirror[Copy Original File]\n    IsTranslatable -- Yes --&gt; Shield[Apply Syntax Placeholders]\n\n    Shield --&gt; Trans[Translate via Ollama API]\n    Trans --&gt; Restore[Restore Protected Code/Math]\n    Restore --&gt; Save[Create Dir &amp; Save File]\n    Save --&gt; NextFile\n</code></pre>"},{"location":"#todo","title":"Todo","text":"<ul> <li>[x] Click-based CLI interface</li> <li>[x] Placeholder-based syntax protection (Code/LaTeX)</li> <li>[x] Multi-threaded parallel processing</li> <li>[x] Implement hash caching to skip unchanged files</li> <li>[ ] Finish the Docusaurus translate script</li> <li>[ ] User Tree-sitter to replace the code blocks before translation instead of regex</li> <li>[ ] Add support for more file types</li> <li>[ ] ...</li> </ul>"},{"location":"#license","title":"License","text":"<p>This project is licensed under the MIT License.</p>"}]}